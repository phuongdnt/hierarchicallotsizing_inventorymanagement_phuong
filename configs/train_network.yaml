env:
  env_type: "network"
  
  # CẤU HÌNH SƠ ĐỒ MẠNG LƯỚI (TOPOLOGY)
  # Tổng cộng 6 Agent:
  # - Cấp 1 (Retailers - Khách hàng): Agent 0, Agent 1
  # - Cấp 2 (Distributors): Agent 2, Agent 3
  # - Cấp 3 (Factories - Nhà máy): Agent 4, Agent 5
  
  # Danh sách con (Ai cấp hàng cho ai?)
  children:
    4: [2]   # Factory 4 cấp cho Distributor 2
    5: [3]   # Factory 5 cấp cho Distributor 3
    2: [0]   # Distributor 2 cấp cho Retailer 0
    3: [1]   # Distributor 3 cấp cho Retailer 1
    0: []    # Retailer 0 (Lá - Nhận demand từ khách)
    1: []    # Retailer 1 (Lá - Nhận demand từ khách)

  # Danh sách cha (Ai đặt hàng từ ai?)
  parents:
    0: 2     # 0 đặt từ 2
    1: 3     # 1 đặt từ 3
    2: 4     # 2 đặt từ 4
    3: 5     # 3 đặt từ 5
    4: null  # 4 là gốc (không đặt hàng từ ai)
    5: null  # 5 là gốc (không đặt hàng từ ai)

  # CÁC THAM SỐ KHÁC
  lead_time: 2
  episode_len: 100
  action_dim: 21
  init_inventory: 20
  init_outstanding: 10
  
  # Chi phí (Phải đủ 6 phần tử cho 6 agent: 0, 1, 2, 3, 4, 5)
  holding_cost: [1.0, 1.0, 1.0, 1.0, 1.0, 1.0]
  backlog_cost: [5.0, 5.0, 3.0, 3.0, 2.0, 2.0]
  
  fixed_cost: 1.0
  external_demand_dist: "merton"
  external_max_demand: 20
  
  # Data đánh giá cho các Retailer (Agent 0 và Agent 1)
  eval_data_dirs: 
    - "test_data/test_demand_merton"
    - "test_data/test_demand_merton"

agent:
  hidden_dim: 128
  critic_hidden_dim: 256
  actor_lr: 0.0001
  critic_lr: 0.0001
  gamma: 0.99
  gae_lambda: 0.95
  eps_clip: 0.2
  value_coef: 0.5
  entropy_coef: 0.05

training:
  episodes: 10000
  horizon: 100
  evaluate_every: 100
  
  # Cấu hình lưu model
  save_path: "results/network_2x3_model.pth"
  
  # Số luồng chạy song song (Tăng tốc độ train)
  n_rollout_threads: 4
  n_eval_rollout_threads: 1

  # Early Stopping (Dừng sớm nếu không cải thiện)
  early_stop: true
  n_warmup_evaluations: 20
  n_no_improvement_thres: 20
  
  # Genetic Algorithm (Nếu không dùng thì set false)
  use_ga: false
  ga_horizon: 5

heuristic:
  ga:
    pop_size: 30
    generations: 40
    mutation_rate: 0.1
